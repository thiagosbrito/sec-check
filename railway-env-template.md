# Railway Environment Configuration

## 1. Railway Redis Service
In your Railway dashboard, add a Redis service:
- Service Name: `redis`
- Railway will generate: `REDIS_URL`

## 2. Railway Worker Service  
Add these environment variables to your worker service:

```bash
# Database (your existing Supabase URL)
DATABASE_URL=your_supabase_database_url_here

# Redis (will be auto-generated by Railway)
REDIS_URL=${{Redis.REDIS_URL}}

# Worker Configuration
NODE_ENV=production
WORKER_CONCURRENCY=2

# Build Configuration (if needed)
NIXPACKS_BUILD_CMD=pnpm build
NIXPACKS_START_CMD=node dist/worker.js
```

## 3. Update Local .env.local
Once Railway gives you the Redis URL, update your main app:

```bash
# In /Users/brito/projects/sec-check/.env.local
REDIS_URL=your_railway_redis_url_here
DATABASE_URL=your_supabase_url_unchanged
```

## 4. Railway Commands
```bash
# Deploy worker
railway up

# Check status  
railway status

# View logs
railway logs

# Connect to Railway project
railway link
```

## 5. Expected Railway URLs
- Redis: `redis://default:password@redis.railway.internal:6379`
- Worker: `https://worker-production-xxxx.up.railway.app`

## Testing Steps
1. Deploy Redis service ✅
2. Deploy worker service ✅  
3. Update local .env.local with Railway Redis URL
4. Test scan from your Next.js app
5. Check Railway logs for worker activity

## Next Steps After Deployment
- [ ] Get Railway Redis URL from dashboard
- [ ] Update local environment
- [ ] Test end-to-end scan workflow
- [ ] Monitor Railway logs for issues